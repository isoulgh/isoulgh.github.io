(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{526:function(a,t,s){"use strict";s.r(t);var e=s(4),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"hexo-个人服务器-入坑指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hexo-个人服务器-入坑指南"}},[a._v("#")]),a._v(" Hexo+个人服务器 入坑指南")]),a._v(" "),s("p",[a._v("参考文章：")]),a._v(" "),s("p",[a._v("https://juejin.im/post/5d54f29af265da03cc08b45a#heading-7")]),a._v(" "),s("h2",{attrs:{id:"关于云服务器的操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于云服务器的操作"}},[a._v("#")]),a._v(" 关于云服务器的操作：")]),a._v(" "),s("p",[a._v("安装Nodejs、Nginx、Git")]),a._v(" "),s("p",[a._v("Nginx配置：")]),a._v(" "),s("p",[a._v("编辑一个新的nginx配置文件，在原配置文件中导入这个新文件")]),a._v(" "),s("p",[a._v("创建一个文件夹名为vhost，新建配置文件blog.conf")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("server{\n\tlisten    80;\n\troot /home/www/website;这里填博客目录存放的地址\n\tserver_name 这里填域名如(www.baidu.com) 如果暂时没有域名就填阿里云的公网ip，以后有了再改回来;\n\tlocation /{\n\t}\n}\n")])])]),s("p",[a._v("配置文件导入位置 /usr/local/nginx/conf/nginx.conf")]),a._v(" "),s("p",[s("img",{attrs:{src:"images/2002110_Snipaste_2020-02-11_23-09-21.png",alt:""}})]),a._v(" "),s("p",[a._v("如果以后还想添加新的网址，也可以在vhost目录下新建一个conf配置文件。")]),a._v(" "),s("p",[a._v("Git安装命令：yum install git")]),a._v(" "),s("p",[a._v("配置git用户用来专门拉代码")]),a._v(" "),s("p",[a._v("adduser git")]),a._v(" "),s("p",[a._v("修改用户权限：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chmod 740 /etc/sudoers\nvi /etc/sudoers\n")])])]),s("p",[a._v("找到这个位置添加下面这句话 git ALL=(ALL) ALL")]),a._v(" "),s("p",[s("img",{attrs:{src:"images/2002110_Snipaste_2020-02-11_23-14-26.png",alt:""}})]),a._v(" "),s("p",[a._v("保存退出后 将sudoers文件权限改回原样")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chmod 400 /etc/sudoers\n")])])]),s("p",[a._v("设置git用户的密码")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo passwd git\n")])])]),s("p",[a._v("暂不知道这步有什么用")]),a._v(" "),s("p",[a._v("生成公钥密钥文件(这一步很重要，也是我踩过的坑)")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ssh-keygen\n")])])]),s("p",[a._v("此时在目录下就会有两个文件，分别是id_rsa 和 id_rsa.pub")]),a._v(" "),s("p",[a._v("其中 id_rsa.pub 就是公钥文件 我们复制一份")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cp id_rsa.pub authorized_keys\n")])])]),s("p",[a._v("这样目录下就会有一个authorized_keys文件，它和id_rsa.pub一模一样。")]),a._v(" "),s("p",[a._v("最后我们修改它的权限")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chmod 600 ~/.ssh/authorized_keys\nchmod 700 ~/.ssh\n")])])]),s("p",[a._v("然后我们在自己的电脑上，打开cmd，使用ssh方式连接我们的云服务器。")]),a._v(" "),s("p",[s("img",{attrs:{src:"images/2002110_Snipaste_2020-02-11_23-18-04.png",alt:""}})]),a._v(" "),s("p",[a._v("最后提示")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Welcome to Alibaba Cloud Elastic Compute Service !\n")])])]),s("p",[a._v("现在我们要创建一个git的仓库，并且新建一个post-receive文件，操作如下:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cd www/gitrepo\ngit init --bare blog.git\nvi blog.git/hooks/post-receive\n")])])]),s("p",[a._v("输入以下内容：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("git --work-tree=/home/www/website --git-dir=/home/git/blog.git checkout -f\n")])])]),s("p",[a._v("保存退出并授予该文件可执行权限")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chmod +x ~/blog.git/hooks/post-receive\n")])])]),s("p",[a._v("至此我们就完成了所有关于服务器端的配置。")]),a._v(" "),s("p",[a._v("关于本地主机的操作")]),a._v(" "),s("p",[a._v("1.安装Node.js")]),a._v(" "),s("p",[a._v("2.安装Hexo")]),a._v(" "),s("p",[a._v("由于使用npm直接下载会有很多人遇到卡顿的问题(国外服务器)，所以我们要做的第一步工作是将npm换成淘宝的服务器。 cmd输入下面的命令：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm config set registry https://registry.npm.taobao.org\n# 然后安装cnpm\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n")])])]),s("p",[a._v("接下来就直接安装 hexo")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cnpm install -g hexo-cli\n")])])]),s("p",[a._v("然后我们选一个目录用来初始化博客程序 例如G:/Blog")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("G:\ncd Blog\nhexo init\n")])])]),s("p",[a._v("执行成功后安装两个插件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm install hexo-deployer-git --save\nnpm install hexo-server\n")])])]),s("p",[a._v("之后我们就可以在自己的本机上查看自己的博客了")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("hexo g\nhexo s\n")])])]),s("p",[a._v("配置_config.yml完成服务器的部署")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("deploy:\ntype: git\nrepo: git@这里改为服务器公网IP:/home/git/blog.git       \nbranch: master                           \nmessage:    \n")])])]),s("p",[a._v("在服务器上重新运行nginx服务器 "),s("code",[a._v("nginx -s reload")])]),a._v(" "),s("h2",{attrs:{id:"_1、nginx的下载、安装和启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、nginx的下载、安装和启动"}},[a._v("#")]),a._v(" 1、Nginx的下载、安装和启动")]),a._v(" "),s("p",[a._v("参考文章：")]),a._v(" "),s("p",[a._v("http://www.belonk.com/c/nginx_download_install.html")]),a._v(" "),s("hr"),a._v(" "),s("h3",{attrs:{id:"_1-0-前期准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-0-前期准备"}},[a._v("#")]),a._v(" 1.0 前期准备")]),a._v(" "),s("ol",[s("li",[a._v("官方下载地址:")])]),a._v(" "),s("p",[a._v("http://nginx.org/en/download.html")]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[a._v("官方下载页面链接分析：")])]),a._v(" "),s("p",[s("img",{attrs:{src:"images/2002110_Snipaste_2020-02-11_22-48-07.png",alt:""}})]),a._v(" "),s("p",[a._v("CHANGES的链接，是对于此版本的更新日志记录；")]),a._v(" "),s("p",[a._v("Nginx-x.x.x的链接，对应的是nginx特定版本的源代码；")]),a._v(" "),s("p",[a._v("pgp链接，记录的是使用GPG加密软件计算后的签名信息，用于下载文件的验证，防止文件被篡改；")]),a._v(" "),s("p",[a._v("Nginx/Windows-x.x.x对应的是nginx的windows版本的下载链接。")]),a._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[a._v("uname -a 查看Linux内核版本")])]),a._v(" "),s("li",[s("p",[a._v("一些编译插件")])])]),a._v(" "),s("ul",[s("li",[a._v("GCC编译器：编译c语言程序")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install -y gcc\nyum install -y gcc-c++\n")])])]),s("ul",[s("li",[a._v("PCRE库：支持rewrite模块")])]),a._v(" "),s("p",[a._v("PCRE（Perl Compatible Regular Expressions，Perl兼容正则表达式）是由Philip Hazel开发的函数库，目前为很多软件所使用，该库支持正则表达式。Nginx的HTTP模块要靠它来解析正则表达式。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install –y pcre pcre-devel\n")])])]),s("p",[a._v("pcre-devel是使用PCRE做二次开发时所需要的开发库，包括头文件等，这也是编译Nginx所必须使用的。")]),a._v(" "),s("ul",[s("li",[a._v("ZLIB库：支持gzip模块")])]),a._v(" "),s("p",[a._v("zlib库用于对HTTP包的内容做gzip格式的压缩，如果我们在nginx.conf里配置了gzip on，并指定对于某些类型（content-type）的HTTP响应使用gzip来进行压缩以减少网络传输量，那么，在编译时就必须把zlib编译进Nginx。其yum安装方式如下：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install -y zlib zlib-devel\n")])])]),s("p",[a._v("同理，zlib是直接使用的库，zlib-devel是二次开发所需要的库")]),a._v(" "),s("ul",[s("li",[a._v("Openssl库：支持ssl模块")])]),a._v(" "),s("p",[a._v("如果服务器需要在安全的SSL协议上传输HTTP，或者使用MD5、SHA1等散列函数，需要安装该模块。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install –y openssl openssl-devel\n")])])]),s("h3",{attrs:{id:"_1-1-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-安装"}},[a._v("#")]),a._v(" 1.1 安装")]),a._v(" "),s("p",[a._v("首先下载Nginx源码包，解压到某个目录")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tar xf nginx-1.12.0.tar.gz\n")])])]),s("ol",[s("li",[a._v("源码包分析：")])]),a._v(" "),s("p",[s("img",{attrs:{src:"images/2002110_Snipaste_2020-02-11_22-49-17.png",alt:""}})]),a._v(" "),s("p",[a._v("auto：存放大量脚本，与根目录configure文件相关；")]),a._v(" "),s("p",[a._v("conf：存放nginx的配置文件；")]),a._v(" "),s("p",[a._v("html：存放nginx首页面和其他的html页面；")]),a._v(" "),s("p",[a._v("man：存放nginx的的帮助文档，安装文成后可以使用man命令查看帮助；")]),a._v(" "),s("p",[a._v("src：存放nginx源代码")]),a._v(" "),s("p",[a._v("configure文件：脚本文件，做一些准备工作，包括系统内核检测、必须软件库检测、参数解析、中间目录生成，生成makefile文件等等；")]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[a._v("然后执行如下三个命令：")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./configure\nmake\nmake install\n")])])]),s("p",[a._v("configure文件做一些准备工作；")]),a._v(" "),s("p",[a._v("make命令根据configure命令生成的makefile文件编译nginx工程，并生成目标文件、最终的二进制文件；")]),a._v(" "),s("p",[a._v("make install命令根据configure执行时的参数将nginx部署到指定的按照目录，包括相关目录的简历和二进制文件、配置文件的复制等。")]),a._v(" "),s("h3",{attrs:{id:"_1-2-启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-启动"}},[a._v("#")]),a._v(" 1.2 启动")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("[root@iZwz9g2hqiikgs5lncf7f7Z nginx]# pwd\n/usr/local/nginx\n[root@iZwz9g2hqiikgs5lncf7f7Z nginx]# ./sbin/nginx\n")])])]),s("p",[a._v("这时，会读取nginx安装目录下的配置文件：/usr/local/nginx/conf/nginx.conf")]),a._v(" "),s("h2",{attrs:{id:"node-js下载与安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-js下载与安装"}},[a._v("#")]),a._v(" Node.js下载与安装")]),a._v(" "),s("p",[a._v("参考文章：")]),a._v(" "),s("p",[a._v("https://help.aliyun.com/document_detail/50775.html")]),a._v(" "),s("p",[a._v("官方下载地址：")]),a._v(" "),s("p",[a._v("https://nodejs.org/zh-cn/download/")]),a._v(" "),s("p",[a._v("首先解压")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tar xvf node-v6.9.5-linux-x64.tar.xz\n")])])]),s("p",[a._v("创建软链接，您就可以在任意目录下直接使用node和npm命令。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("ln -s /root/node-v6.9.5-linux-x64/bin/node /usr/local/bin/node\nln -s /root/node-v6.9.5-linux-x64/bin/npm /usr/local/bin/npm\n")])])]),s("p",[a._v("Linux删除命令：rm -rf xxx")])])}),[],!1,null,null,null);t.default=n.exports}}]);